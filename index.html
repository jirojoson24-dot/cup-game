<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ðŸ¥¤ Find the Ball</title>

<style>
body {
  margin: 0;
  height: 100vh;
  background: #ffe6f0;
  font-family: "Comic Sans MS", cursive;
  display: flex;
  justify-content: center;
  align-items: center;
}

#game {
  width: 360px;
  text-align: center;
}

h1 { color: #ff1493; }
#round { color: #c2185b; }

#stage {
  position: relative;
  height: 180px;
  margin-top: 20px;
}

.cup {
  width: 90px;
  height: 120px;
  background: #ff69b4;
  border-radius: 0 0 30px 30px;
  position: absolute;
  bottom: 0;
  cursor: pointer;
  transition: transform 0.45s ease;
}

.ball {
  position: absolute;
  bottom: -18px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 26px;
  display: none;
}

#freeBall {
  font-size: 30px;
  display: none;
}

#message {
  min-height: 40px;
  color: #ad1457;
  margin-top: 10px;
}

#finalScreen {
  display: none;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

video {
  width: 100%;
  border-radius: 15px;
  margin-top: 10px;
}
</style>
</head>

<body>

<div id="game">
  <h1>ðŸ¥¤ Find the Ball ðŸ¥¤</h1>
  <div id="round">Round 1 of 5</div>

  <div id="freeBall">âšª</div>

  <div id="stage">
    <div class="cup" data-index="0" style="transform:translateX(0px)">
      <div class="ball">âšª</div>
    </div>
    <div class="cup" data-index="1" style="transform:translateX(135px)">
      <div class="ball">âšª</div>
    </div>
    <div class="cup" data-index="2" style="transform:translateX(270px)">
      <div class="ball">âšª</div>
    </div>
  </div>

  <div id="message">Watch closely ðŸ‘€</div>

  <div id="finalScreen">
    <h2>Will you be my Valentine?</h2>
    <p>
      Renz Lloyd Peji Consumo,<br>
      tirador ng kwekwek
    </p>
    <video id="finalVideo" autoplay controls>
      <source src="final.mp4" type="video/mp4">
    </video>
  </div>
</div>

<script>
const cups = [...document.querySelectorAll(".cup")];
const balls = document.querySelectorAll(".ball");
const freeBall = document.getElementById("freeBall");
const message = document.getElementById("message");
const roundText = document.getElementById("round");
const finalScreen = document.getElementById("finalScreen");
const game = document.getElementById("game");

let positions = [0, 135, 270];
let round = 1;
let winningIndex = 0;
let canPick = false;

const sounds = {
  reveal: new Audio("https://assets.mixkit.co/sfx/preview/mixkit-magic-pop-2327.mp3"),
  shuffle: new Audio("https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.mp3"),
  win: new Audio("https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3"),
  lose: new Audio("https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-buzz-950.mp3")
};

function startRound() {
  canPick = false;
  balls.forEach(b => b.style.display = "none");
  message.textContent = "Look at the ball ðŸ‘€";

  freeBall.style.display = "block";
  sounds.reveal.play();

  winningIndex = Math.floor(Math.random() * 3);

  setTimeout(() => {
    freeBall.style.display = "none";
    cups[winningIndex].querySelector(".ball").style.display = "block";

    setTimeout(() => {
      balls.forEach(b => b.style.display = "none");
      shuffle();
    }, 700);
  }, 1200);
}

function shuffle() {
  message.textContent = "Shuffling...";
  sounds.shuffle.play();

  let moves = 3 + round * 2;
  let speed = Math.max(200, 600 - round * 80);

  let interval = setInterval(() => {
    let i = Math.floor(Math.random() * 3);
    let j = Math.floor(Math.random() * 3);
    if (i === j) return;

    [positions[i], positions[j]] = [positions[j], positions[i]];
    cups[i].style.transform = `translateX(${positions[i]}px)`;
    cups[j].style.transform = `translateX(${positions[j]}px)`;

    if (winningIndex === i) winningIndex = j;
    else if (winningIndex === j) winningIndex = i;

    if (--moves === 0) {
      clearInterval(interval);
      message.textContent = "Pick a cup ðŸ¥¤";
      canPick = true;
    }
  }, speed);
}

cups.forEach((cup, index) => {
  cup.addEventListener("click", () => {
    if (!canPick) return;

    balls.forEach(b => b.style.display = "none");
    cups[winningIndex].querySelector(".ball").style.display = "block";

    if (index === winningIndex) {
      sounds.win.play();
      message.textContent = "Correct!";
      canPick = false;

      setTimeout(() => {
        round++;
        if (round > 5) {
          game.innerHTML = "";
          document.body.appendChild(finalScreen);
          finalScreen.style.display = "flex";
        } else {
          roundText.textContent = `Round ${round} of 5`;
          startRound();
        }
      }, 1000);
    } else {
      sounds.lose.play();
      message.textContent = "Wrong ðŸ˜ˆ Try again!";
      canPick = false;
      setTimeout(startRound, 1200);
    }
  });
});

startRound();
</script>

</body>
</html>
